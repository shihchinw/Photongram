var __extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},__decorate=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=3>o?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(3>o?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},TrackBall=function(e){function t(){e.call(this)}return __extends(t,e),t.prototype.ready=function(){this._initRenderer(),this._bindProjector(),this._render()},t.prototype._initRenderer=function(){var e=300,t=300;this.renderer=new THREE.WebGLRenderer({alpha:!0}),this.renderer.setSize(e,t),this.renderer.setClearColor(0,0),this.appendChild(this.renderer.domElement);var r=new THREE.Vector3(0,2,0);this.camera=new THREE.PerspectiveCamera(75,e/t,.1,1e3),this.camera.position.set(r.x,r.y,r.z),this.camera.lookAt(new THREE.Vector3(0,0,0)),this.scene=new THREE.Scene,this._setupScene(this.scene)},t.prototype._bindProjector=function(){var e=this;this.raycaster=new THREE.Raycaster;var t=this,r=this;r.onmousedown=function(e){t.isClick=!0},r.onmouseup=function(e){t.isClick=!1},r.onmousemove=function(n){if(n.preventDefault(),t.isClick===!0){var i=new THREE.Vector2;i.x=(n.clientX-r.offsetLeft)/r.clientWidth*2-1,i.y=2*-((n.clientY-r.offsetTop)/r.clientHeight)+1,t.raycaster.setFromCamera(i,t.camera);var o=t.raycaster.intersectObjects(t.scene.children);if(o.length>0){var s=o[0].point;if(s.y<=.01)return;t.light.position.set(s.x,s.y,s.z),e.fire("light-pos-changed",s.clone())}}}},t.prototype._setupScene=function(e){var t=new THREE.MeshPhongMaterial,r=new THREE.Mesh(new THREE.SphereGeometry(1,32,32),t);r.translateY(-.5),e.add(r),this.light=new THREE.DirectionalLight(16777215,.5),this.light.position.set(1,0,0),e.add(this.light)},t.prototype._render=function(){this.renderer.render(this.scene,this.camera);var e=this;requestAnimationFrame(function(){e._render()}.bind(this))},t=__decorate([component("track-ball")],t)}(polymer.Base);TrackBall.register();