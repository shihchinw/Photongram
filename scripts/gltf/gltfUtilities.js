!function(e,n){"use strict";"function"==typeof define&&define.amd?define([],n):e.gltfUtilities=n()}(this,function(){"use strict";function e(e,n){var r=decodeURIComponent(n);return e?atob(r):r}function n(n,r){for(var t=e(n,r),o=new ArrayBuffer(t.length),a=new Uint8Array(o),u=0;u<t.length;u++)a[u]=t.charCodeAt(u);return o}function r(r,t){t="undefined"!=typeof t?t:"";var o=r[1],a=!!r[2],u=r[3];switch(t){case"":case"text":return e(a,u);case"arraybuffer":return n(a,u);case"blob":var f=n(a,u);return new Blob([f],{type:o});case"document":var i=new DOMParser;return i.parseFromString(e(a,u),o);case"json":return JSON.parse(e(a,u));default:throw"Unhandled responseType: "+t}}var t=function(e){var n=window.location,r=document.createElement("a");return r.href=e,n.protocol!==r.protocol||n.host!==r.host},o=/^data:/,a=function(e,n,r){var a=new Image;a.onload=function(){n(a)},"undefined"!=typeof r&&(a.onerror=r);var u;u=o.test(e)?!1:t(e),u&&(a.crossOrigin=""),a.src=e},u=/^data:(.*?)(;base64)?,(.*)$/,f=function(e,n,t,o){var a=u.exec(e);if(null!==a)return void t(r(a,n));var f=new XMLHttpRequest;f.open("GET",e,!0),"undefined"!=typeof n&&(f.responseType=n),f.onload=function(e){200===f.status?t(f.response):o(f)},f.onerror=function(e){o(f)},f.send()},i=function(e,n,r){f(e,"arraybuffer",n,r)},c=function(e,n,r){return f(e,void 0,n,r)};return{loadImage:a,loadArrayBuffer:i,loadText:c}});